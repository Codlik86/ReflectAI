# app/exercises.py
# Темы, интро и упражнения. Для пошаговых первый элемент steps — инструкция (шаг 0).

TOPICS = {
    "panic": {
        "title": "Паническая атака",
        "intro": "Если накрывает ПА — выбери упражнение. Я дам короткие шаги, чтобы переждать волну и вернуть опору.",
        "exercises": [
            {
                "id": "panic_relax",
                "title": "Прогрессивная релаксация (3 минуты)",
                "steps": [
                    "ИНСТРУКЦИЯ — 3 минуты. Сядь/ляг, телефон в беззвучный. После каждого микрошага жми «Далее».",
                    "1) Плечи: подними к ушам на 5 секунд → отпусти вместе с выдохом.",
                    "2) Кулаки: сожми на 5 сек → расслабь.",
                    "3) Лицо: наморщи лоб/щеки на 5 сек → отпусти, разомкни челюсть.",
                    "4) Ноги: натяни носки на себя на 5 сек → отпусти.",
                    "5) Итог: длинный вдох-выдох — где стало спокойнее?"
                ],
            },
            {
                "id": "panic_plan_short",
                "title": "План при панической атаке (коротко)",
                "steps": [
                    "ИНСТРУКЦИЯ — быстрая карта действий на 2–3 минуты.",
                    "1) Замри/опора. Скажи себе: «Это паническая атака — она пройдёт».",
                    "2) Дыхание 3×3: вдох 3 → пауза 3 → выдох 3 (три цикла).",
                    "3) Заземление 5-4-3-2-1: 5 вижу, 4 ощущаю, 3 слышу, 2 запаха, 1 вкус.",
                    "4) Напоминание: это безопасно и временно. Волна спадёт."
                ],
            },
        ],
    },

    "anxiety": {
        "title": "Тревога",
        "intro": "Когда накатывает тревога — выбери дыхание, заземление или мини-разбор мысли (КПТ).",
        "exercises": [
            {
                "id": "anti_cata_mini",
                "title": "Анти-катастрофизация (КПТ-мини)",
                "steps": [
                    "ИНСТРУКЦИЯ — мини-разбор мысли. Писать ответы можно, но не обязательно.",
                    "1) Мысль: какая пугающая мысль сейчас?",
                    "2) Доказательства «за»: какие факты подтверждают её?",
                    "3) Доказательства «против»: какие факты ослабляют её?",
                    "4) Альтернативный взгляд: что ещё можно подумать?",
                    "5) Шкала: тревога от 0 до 10 сейчас."
                ],
            },
            {
                "id": "ground_54321",
                "title": "Заземление 5-4-3-2-1",
                "steps": [
                    "ИНСТРУКЦИЯ — верни внимание в настоящее за ~2 минуты.",
                    "1) Назови 5 предметов вокруг.",
                    "2) Отметь 4 тактильных ощущения.",
                    "3) Прислушайся к 3 звукам.",
                    "4) Заметь 2 запаха.",
                    "5) 1 ощущение во рту/теле."
                ],
            },
            {
                "id": "box_breath",
                "title": "Квадратное дыхание (1 мин)",
                "steps": [
                    "ИНСТРУКЦИЯ — 4-4-4-4, 3–4 цикла.",
                    "1) Вдох 4.",
                    "2) Пауза 4.",
                    "3) Выдох 4.",
                    "4) Пауза 4."
                ],
            },
        ],
    },

    "anger": {
        "title": "Злость",
        "intro": "Если кипит злость — пауза по DBT или сёрфинг на импульсе поможет не сорваться.",
        "exercises": [
            {
                "id": "dbt_stop",
                "title": "Навык STOP",
                "steps": [
                    "ИНСТРУКЦИЯ — S-T-O-P. Следуй буквам и жми «Далее».",
                    "S — Stop: остановись.",
                    "T — Take a breath: вдох-выдох.",
                    "O — Observe: заметь тело/мысли/ситуацию.",
                    "P — Proceed: действуй осознанно, маленьким шагом."
                ],
            },
            {
                "id": "urge_surf",
                "title": "Сёрфинг на импульсе",
                "steps": [
                    "ИНСТРУКЦИЯ — наблюдай «волну» 2–3 минуты.",
                    "1) Где в теле импульс сильнее?",
                    "2) Как меняется волна: растёт/падает?",
                    "3) Что поможет «оседлать» волну?",
                    "4) Заметь, когда спадёт хотя бы на 1 пункт."
                ],
            },
        ],
    },

    "sadness": {
        "title": "Боль и тоска",
        "intro": "Когда тянет вниз — мягкая забота и маленькие шаги помогают вернуться к жизни.",
        "exercises": [
            {
                "id": "self_compassion_note",
                "title": "Записка поддержки себе",
                "text": "Напиши 3–5 предложений так, как поддержал бы друга: признать боль → доброжелательность → маленькая забота о себе сегодня."
            },
            {
                "id": "tiny_action",
                "title": "Маленькое действие на 10 минут",
                "text": "Выбери одно крошечное действие (душ, посуда 5 мин, короткая прогулка, стакан воды). Сделай только это — и вернись."
            },
        ],
    },

    "sleep": {
        "title": "Сон",
        "intro": "Если сложно заснуть — попробуй ритуал отключения дня или дыхание 4-7-8.",
        "exercises": [
            {
                "id": "wind_down_20",
                "title": "Выключение дня: 20 минут",
                "steps": [
                    "ИНСТРУКЦИЯ — маленький ритуал перед сном.",
                    "1) Приглуши свет, убери экраны.",
                    "2) Тело: тёплая вода, мягкая растяжка.",
                    "3) Голова: выпиши 3 дела на завтра.",
                    "4) Спокойствие: дыхание 4-7-8 или короткая медитация."
                ],
            },
            {
                "id": "breath_478",
                "title": "Дыхание 4-7-8",
                "steps": [
                    "ИНСТРУКЦИЯ — 2 минуты, 4–6 циклов.",
                    "1) Вдох 4.",
                    "2) Пауза 7.",
                    "3) Выдох 8."
                ],
            },
        ],
    },

    "meditations": {
        "title": "Медитации",
        "intro": "Короткие практики внимания: дыхание и сканирование тела.",
        "exercises": [
            {
                "id": "one_min_breath",
                "title": "1-минутная пауза дыхания",
                "steps": [
                    "ИНСТРУКЦИЯ — 1 минута настройки внимания.",
                    "1) Почувствуй опору и дыхание у входа в нос.",
                    "2) Сделай 6–8 спокойных циклов дыхания.",
                    "3) Закончить: глубокий вдох-выдох."
                ],
            },
            {
                "id": "body_scan_short",
                "title": "Сканирование тела (коротко)",
                "steps": [
                    "ИНСТРУКЦИЯ — 3–4 минуты.",
                    "1) Ступни и икры — 10–15 сек.",
                    "2) Колени и бёдра — 10–15 сек.",
                    "3) Живот и грудь — 10–15 сек.",
                    "4) Плечи, шея, лицо — 10–15 сек.",
                    "5) Всё тело целиком — 10–15 сек."
                ],
            },
        ],
    },
}
