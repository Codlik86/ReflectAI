# -*- coding: utf-8 -*-
"""
Помни — реестр тем и упражнений для раздела «Разобраться».
Структура:
TOPICS = {
  "<topic_id>": {
    "title": str,
    "intro": str,                   # краткое тёплое описание темы
    "type": "steps" | "chat",       # "chat" — открываем сразу живой чат без шагов
    # только для type="steps":
    "exercises": [
      {
        "id": str,
        "title": str,
        "intro": str,               # зачем это упражнение и как им пользоваться
        "steps": [str, ...]         # последовательные шаги
      }, ...
    ],
    # только для type="chat":
    "chat_prompt": str              # направляющая подсказка для стартового сообщения
  },
  ...
}
Порядок вывода тем соответствует порядку объявления в словаре.
"""

from typing import Dict, Any

TOPICS: Dict[str, Dict[str, Any]] = {
    # 0. Рефлексия — отдельная тема-чт (без шагов)
    "reflection": {
        "title": "Рефлексия",
        "type": "chat",
        "intro": (
            "Здесь можно просто выговориться и потихоньку навести порядок в голове. "
            "Без сценариев и списков — живой разговор о том, что сейчас важно. "
            "Я рядом, буду задавать мягкие вопросы и помогать ловить мысли и смыслы."
        ),
        "chat_prompt": (
            "Старт «Рефлексия». Коротко объясни формат (свободный тёплый диалог), "
            "пригласи поделиться тем, что сейчас на душе, и предложи маленький шаг: "
            "например, назвать одно чувство и одну потребность. Сохраняй мягкий тон."
        ),
    },

    # 1. Тревога
    "anxiety": {
        "title": "Тревога",
        "type": "steps",
        "intro": (
            "Тревога — нормальная реакция на неопределённость, просто она иногда "
            "становится слишком громкой. Тут — быстрые практики, чтобы вернуть опору: "
            "чуть замедлиться, проверить мысли на факты и сделать маленькое действие."
        ),
        "exercises": [
            {
                "id": "anx_breath_46",
                "title": "Дыхание 4–6 (быстрое заземление)",
                "intro": (
                    "Короткая практика, чтобы дать телу сигнал безопасности. "
                    "Подходит в моменты, когда всё внутри ускоряется."
                ),
                "steps": [
                    "Сядь удобнее. Плечи чуть вниз, стопы на полу. Заметь точку опоры телом.",
                    "Медленный вдох носом на 4 счёта: 1…2…3…4. Живот мягко расширяется.",
                    "Плавный выдох ртом на 6 счётов: 1…2…3…4…5…6. Как будто выпускаешь пар.",
                    "Повтори 6–8 циклов. Заметь: что поменялось в теле по шкале от 0 до 10?",
                ],
            },
            {
                "id": "anx_thoughts_facts",
                "title": "Мысль ↔ Факты",
                "intro": (
                    "Тревожные мысли звучат убедительно, но не всегда равны фактам. "
                    "Разделим предположения и наблюдаемые данные."
                ),
                "steps": [
                    "Запиши тревожную мысль одной фразой. Пример: «Я всё провалю завтра».",
                    "Отметь её как МЫСЛЬ. Что в ней — прогнозы, обобщения, чтение мыслей?",
                    "Собери ФАКТЫ: что точно известно на сегодня? даты, письма, результаты.",
                    "Сформулируй сбалансированную мысль: «Я волнуюсь, и у меня есть план из 2 шагов…».",
                ],
            },
        ],
    },

    # 2. Злость
    "anger": {
        "title": "Злость",
        "type": "steps",
        "intro": (
            "Злость защищает наши границы. Её можно проживать экологично: безопасно "
            "снизить накал и потом понять, что важно защитить."
        ),
        "exercises": [
            {
                "id": "ang_stop",
                "title": "Пауза S-T-O-P",
                "intro": "Микропаузa, чтобы не сорваться и выбрать действие осознанно.",
                "steps": [
                    "S (Stop): остановись на мгновение. Ничего не делай 5–10 секунд.",
                    "T (Take a breath): сделай 1–2 медленных выдоха, почувствуй тело.",
                    "O (Observe): заметь мысль, чувство, напряжение в теле, контекст.",
                    "P (Proceed): выбери следующий маленький шаг (уйти на паузу, сказать «вернусь позже», записать мысль).",
                ],
            },
            {
                "id": "ang_release_safe",
                "title": "Безопасный выпуск энергии",
                "intro": "Когда злость в теле большая — даём ей выход без вреда.",
                "steps": [
                    "Определи безопасное место (один/одна, никому не мешаешь).",
                    "Сожми/разожми кулаки 10 раз, сильно напряги/расслабь плечи.",
                    "Выдохни со звуком «х-х-х», представляя, как напряжение выходит.",
                    "Запиши, что за граница для тебя была важна в этой ситуации.",
                ],
            },
        ],
    },

    # 3. Боль и тоска
    "pain_melancholy": {
        "title": "Боль и тоска",
        "type": "steps",
        "intro": (
            "Когда тянет вниз — помогаем себе бережно: признаём чувство, даём телу опору "
            "и делаем один очень маленький шаг к заботе."
        ),
        "exercises": [
            {
                "id": "pm_allow_feel",
                "title": "Разрешить чувство",
                "intro": "Парадоксально, но признание часто снижает интенсивность.",
                "steps": [
                    "Назови чувство словами: «Это тоска/грусть/пустота».",
                    "Положи руку на грудь/живот. 3 мягких выдоха, словно обнимаешь себя.",
                    "Скажи себе: «Мне можно так чувствовать. Это пройдёт».",
                    "Спроси: «Что мне поможет на 5% сейчас?» Стакан воды, душ, окно?",
                ],
            },
            {
                "id": "pm_tiny_action",
                "title": "Маленькое действие",
                "intro": "Когда сил мало, масштаб — микрошаг на 2–5 минут.",
                "steps": [
                    "Выбери одно простое: умыться / проветрить / сложить 5 вещей в стопку.",
                    "Запусти таймер на 2–5 минут и сделай только это.",
                    "После — отметь эффект по шкале 0–10. Даже +1 — уже движение.",
                    "Реши, нужен ли второй микрошаг или пауза.",
                ],
            },
        ],
    },

    # 4. Сон
    "sleep": {
        "title": "Сон",
        "type": "steps",
        "intro": (
            "Помогаем мозгу переключиться в ночной режим: разгружаем голову, "
            "успокаиваем тело, уменьшаем «залипание» на мыслях."
        ),
        "exercises": [
            {
                "id": "sl_dump",
                "title": "Выгрузка мыслей перед сном",
                "intro": "Освободить голову: выписать всё, чем занята мысль.",
                "steps": [
                    "Открой заметку/лист. 3 минуты пиши всё подряд, не редактируя.",
                    "Отметь 1–2 дела на завтра. Рядом — самый маленький первый шаг.",
                    "Закрой список (символически: сложи и убери/поставь галочку «на завтра»).",
                    "Сделай 5 спокойных дыханий и переключись на телесное упражнение.",
                ],
            },
            {
                "id": "sl_body_relax",
                "title": "Телесное расслабление",
                "intro": "Мягкая последовательность для замедления тела.",
                "steps": [
                    "Ляг/сядь удобно. Заметь точки контакта тела с опорой.",
                    "Напряги пальцы ног на вдохе, расслабь на длинном выдохе.",
                    "Поднимись по телу: икры, бёдра, живот, плечи, лицо — по 1 циклу.",
                    "Заверши вниманием к дыханию 1–2 минуты.",
                ],
            },
        ],
    },

    # 5. Дыхание и тело
    "breath_body": {
        "title": "Дыхание и тело",
        "type": "steps",
        "intro": (
            "Тело — быстрый вход к спокойствию. Эти практики возвращают контакт с ощущениями."
        ),
        "exercises": [
            {
                "id": "bb_scan",
                "title": "Скан тела (короткий)",
                "intro": "Пройти вниманием по телу и заметить, где сейчас есть опора.",
                "steps": [
                    "Закрой глаза (если ок). 2 медленных выдоха.",
                    "От стоп к макушке: замечай ощущения — тепло, холод, пульс, пусто/плотно.",
                    "Где приятнее всего? Побудь там вниманием 20–30 секунд.",
                    "Сделай длинный выдох и открой глаза.",
                ],
            },
            {
                "id": "bb_box",
                "title": "Дыхание «квадрат» 4-4-4-4",
                "intro": "Ровняем ритм дыхания и мысли становятся спокойнее.",
                "steps": [
                    "Вдох на 4 — задержка 4 — выдох 4 — пауза 4.",
                    "Представляй квадрат, проходя по его сторонам.",
                    "Повтори 6–8 циклов. Если тревога высокая — удлиняй выдох до 6.",
                    "Заметь изменения в теле и голове.",
                ],
            },
        ],
    },

    # 6. Прокрастинация
    "procrastination": {
        "title": "Прокрастинация",
        "type": "steps",
        "intro": (
            "Откладывание — это чаще защита от тяжёлых чувств (страх, стыд, усталость). "
            "Помогаем себе начать с микродействия и убрать лишнее трение."
        ),
        "exercises": [
            {
                "id": "pr_2min",
                "title": "Две минуты старта",
                "intro": "Обмануть порог входа: делаем только 2 минуты.",
                "steps": [
                    "Определи самый первый минимальный шаг (открыть документ, собрать папки).",
                    "Поставь таймер на 2 минуты и сделай только это.",
                    "Если пошло — продли ещё на 5–10 минут. Если нет — отметь галочку «старт был».",
                    "Небольшое поощрение: вода/чай/потянуться.",
                ],
            },
            {
                "id": "pr_breakdown",
                "title": "Разбивка задачи",
                "intro": "Большое становится подъёмным, когда делится на кирпичики.",
                "steps": [
                    "Запиши итог («что должно быть готово?»).",
                    "Разбей на 3–5 кусочков по 10–20 минут.",
                    "Выбери 1 кусочек на сегодня и один на «если будет ресурс».",
                    "Назначь время в календаре или таймер на 15 минут.",
                ],
            },
        ],
    },

    # 7. Выгорание и усталость
    "burnout": {
        "title": "Выгорание и усталость",
        "type": "steps",
        "intro": (
            "Когда сил мало — темп снижаем и возвращаем базовую заботу: сон, еда, границы."
        ),
        "exercises": [
            {
                "id": "bo_15rest",
                "title": "Пятнадцать минут тишины",
                "intro": "Мини-пауза для нервной системы.",
                "steps": [
                    "Отложи экран. Сядь/ляг так, чтобы шея и спина отдыхали.",
                    "Выставь таймер на 15 минут. Дыхание свободное, взгляд в окно или закрытые глаза.",
                    "Заметь 3 приятных ощущения (тепло, свет, звук).",
                    "После — вода и мягкая растяжка 1 минуту.",
                ],
            },
            {
                "id": "bo_energy_boundaries",
                "title": "Границы энергии",
                "intro": "Определи, что сегодня точно «да», а что — «не сегодня».",
                "steps": [
                    "Список дел на сегодня → отметь 1 обязательное и 1 приятное мини-дело.",
                    "Дальше — «по самочувствию». Остальное переносим без вины.",
                    "Скажи кому нужно: «Сделаю завтра/к такому-то времени» — коротко и ясно.",
                    "Отметь, как чувствует себя тело после такого выбора.",
                ],
            },
        ],
    },

    # 8. Решения и неопределённость
    "decisions": {
        "title": "Решения и неопределённость",
        "type": "steps",
        "intro": (
            "Когда выбора много или страшно промахнуться — помогаем себе уточнить ценности "
            "и сделать маленький безопасный эксперимент."
        ),
        "exercises": [
            {
                "id": "de_pros_cons_values",
                "title": "Плюсы/риски + ценности",
                "intro": "Не только логика, но и важность для тебя.",
                "steps": [
                    "Вариант A и вариант B — запиши по 3 плюса и 3 риска.",
                    "Добавь: «что из моих ценностей поддерживает A/B?» (напр. рост, стабильность, здоровье).",
                    "Какой вариант даёт +1 к качеству жизни в ближайший месяц?",
                    "Какой первый шаг можно сделать уже завтра на 10–20 минут?",
                ],
            },
            {
                "id": "de_24h_experiment",
                "title": "Эксперимент 24 часа",
                "intro": "Мини-проверка гипотезы вместо бесконечных раздумий.",
                "steps": [
                    "Сформулируй гипотезу: «Если я попробую X, то станет Y».",
                    "Выбери действие, которое занимает до 30 минут и безопасно.",
                    "Сделай и зафиксируй результат/ощущения.",
                    "Реши: продолжать, скорректировать или отказаться.",
                ],
            },
        ],
    },

    # 9. Социальная тревога
    "social_anxiety": {
        "title": "Социальная тревога",
        "type": "steps",
        "intro": (
            "Быть замеченным бывает страшно. Поможем подготовиться и наращивать опыт "
            "маленькими шагами."
        ),
        "exercises": [
            {
                "id": "sa_prepare_line",
                "title": "Одна заготовленная реплика",
                "intro": "Снижаем неопределённость перед встречей/звонком.",
                "steps": [
                    "Определи ситуацию (созвон, встреча, касса).",
                    "Придумай 1–2 короткие фразы-«крючки»: приветствие + цель/вопрос.",
                    "Произнеси вслух 2–3 раза, можно перед зеркалом.",
                    "После события — заметь, что прошло ок, а что можно улучшить.",
                ],
            },
            {
                "id": "sa_soft_exposure",
                "title": "Мягкая экспозиция",
                "intro": "Постепенно расширяем зону комфорта.",
                "steps": [
                    "Составь лестницу из 5 маленьких шагов от лёгкого к сложному.",
                    "Начни с уровня 1 и повтори 3–4 раза в разные дни.",
                    "Поднимайся на следующий уровень только когда стало проще.",
                    "Отмечай прогресс (даже +1 по шкале — успех).",
                ],
            },
        ],
    },
}

__all__ = ["TOPICS"]
