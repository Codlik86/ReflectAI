# app/exercises.py
# -*- coding: utf-8 -*-

"""
Полный набор упражнений для тем в разделе «Разобраться».

Структура:
EXERCISES = {
    "<topic_id>": {
        "<exercise_id>": {
            "title": "...",
            "intro": "...",
            "steps": ["...", "...", ...],
        },
        ...
    },
    ...
}

Все тексты — тёплые и понятные, но с опорой на научные подходы (КПТ, дыхательные техники,
основанная осознанность и др.).
"""

EXERCISES = {
    # ===== Сон =====
    "sleep": {
        "body_scan_short": {
            "title": "Скан тела (короткий)",
            "intro": (
                "Короткая практика, чтобы мягко переключиться из головы в тело. "
                "Мы быстро пройдём вниманием по основным зонам, снимая лишнее напряжение. "
                "Хорошо помогает перед сном или когда мысли крутятся."
            ),
            "steps": [
                "Устроись поудобнее. Если получается — закрой глаза. Сделай 1–2 спокойных вдоха и выдоха.",
                "Перенеси внимание в стопы. Заметь опору, тепло или прохладу. Ничего не исправляй — просто отмечай.",
                "Поднимайся вниманием выше: голени и колени… бёдра и таз. Заметь, где тело просит расслабиться.",
                "Живот и грудная клетка: наблюдай, как поднимается и опускается при дыхании.",
                "Плечи и шея: мягко отпусти лишнее напряжение, как будто плечи становятся чуть тяжелее.",
                "Лицо: расслабь лоб, глаза, челюсть. Сделай ещё один плавный выдох и отметь общее состояние.",
                "Заверши: скажи себе мысленно «Я слышу себя и забочусь о себе»."
            ],
        },
        "breath_4_4_4_4": {
            "title": "Дыхание «квадрат» 4-4-4-4",
            "intro": (
                "Ровное дыхание стабилизирует нервную систему. Техника «квадрат»: вдох — пауза — выдох — пауза, "
                "всё по одинаковому счёту. Начнём с ритма 4–4–4–4."
            ),
            "steps": [
                "Сделай плавный вдох на 4 счёта (1-2-3-4).",
                "Пауза на 4 счёта — не задерживай дыхание насильно, просто мягкая пауза.",
                "Выдох на 4 счёта (1-2-3-4) — без усилий, как будто выпускаешь воздух через трубочку.",
                "Снова пауза на 4 счёта.",
                "Повтори 6–8 циклов. Если тревога остаётся — удлиняй выдох до 5–6, сохраняя комфорт."
            ],
        },
        "sleep_gate": {
            "title": "Ворота сна",
            "intro": (
                "Несколько минут, чтобы помочь мозгу переключиться в «ночной режим». "
                "Мы снизим стимуляцию и дадим телу сигнал на засыпание."
            ),
            "steps": [
                "Убери яркий свет экрана, сделай освещение мягче. Телефон — на минимум звука.",
                "Сядь или ляг удобно. 3 спокойных цикла дыхания (вдох — длиннее, выдох — чуть длиннее вдоха).",
                "Прокрути коротко день: 2–3 факта, что получилось. Без оценок. Скажи себе «день завершён».",
                "Составь мини-намерение: «Сейчас я отдыхаю. Утром продолжу со свежей головой».",
            ],
        },
    },

    # ===== Дыхание и тело =====
    "body": {
        "phys_grounding": {
            "title": "Заземление 5-4-3-2-1",
            "intro": (
                "Метод заземления снижает переизбыток эмоций: мы мягко возвращаем внимание в настоящий момент "
                "через органы чувств. Помогает при тревоге и перегрузе."
            ),
            "steps": [
                "Оглянись вокруг и назови 5 вещей, которые видишь.",
                "Отметь 4 звука — близких или дальних.",
                "Заметь 3 ощущения в теле (опора, температура, одежда на коже).",
                "Определи 2 запаха (или просто вдохни глубже и отметь «нейтрально»).",
                "Отметь 1 вкус (или просто «без вкуса»). Сделай спокойный выдох.",
            ],
        },
        "pmr_light": {
            "title": "Мягкая релаксация мышц",
            "intro": (
                "Укороченная прогрессивная мышечная релаксация: слегка напрягаем и отпускаем. "
                "Так тело легче замечает и снимает зажимы."
            ),
            "steps": [
                "Стопы и голени: чуть напряги на 3–4 секунды и отпусти. Почувствуй разницу.",
                "Бёдра и живот: так же мягко напряги и отпусти.",
                "Плечи и кисти: подними плечи к ушам, сожми ладони — и отпусти.",
                "Лицо: сомкни губы, наморщи лоб — и расслабь. Выдохни.",
                "Наблюдай общую волну расслабления ещё 10–15 секунд.",
            ],
        },
    },

    # ===== Прокрастинация =====
    "procrastination": {
        "ten_minutes": {
            "title": "Правило 10 минут",
            "intro": (
                "Начать — самая сложная часть. Мы снимаем планку: просто делаем шаг на 10 минут. "
                "Часто этого хватает, чтобы включиться и продолжить."
            ),
            "steps": [
                "Выбери конкретный кусочек задачи. Чем меньше — тем лучше.",
                "Поставь таймер на 10 минут. Обещание себе: «Только 10 мин — и можно остановиться».",
                "Стартуй. Не ищи идеального качества — сейчас важен разгон.",
                "По сигналу таймера: остановись, отметь прогресс. Хочешь — продолжи ещё 10 мин.",
            ],
        },
        "two_columns": {
            "title": "Две колонки мыслей",
            "intro": (
                "Найдём мысли, которые тормозят, и заменим их на поддерживающие. Это приём из КПТ."
            ),
            "steps": [
                "Колонка 1: запиши 3–5 автоматических мыслей про задачу (например: «Я всё равно не успею»).",
                "Колонка 2: рядом подбери более реалистичные и доброжелательные варианты (например: «Сделаю черновик — это уже шаг»).",
                "Выбери одну поддерживающую мысль как «якорь» на сегодня. С ней — к действию.",
            ],
        },
    },

    # ===== Выгорание и усталость =====
    "burnout": {
        "energy_check": {
            "title": "Проверка батарейки",
            "intro": (
                "Короткий чек-ин с собой: где ты по энергии и что можно подкрутить прямо сейчас."
            ),
            "steps": [
                "По шкале от 0 до 10 — сколько энергии сейчас?",
                "Что её подсъедает? (3 пункта) Что поддерживает? (ещё 3 пункта).",
                "Что одно маленькое ты сделаешь в ближайший час, чтобы себя поддержать? Выбери и запиши.",
            ],
        },
        "compassion_break": {
            "title": "Минутка самосострадания",
            "intro": (
                "Когда трудно, мы часто требовательны к себе. Попробуем на минуту переключиться на поддержку."
            ),
            "steps": [
                "Скажи себе: «Это непросто. Любому было бы тяжело» — это нормализует опыт.",
                "Добавь: «Я не один/одна в этом. Люди через это проходят» — это связывает с другими.",
                "И заверши: «Чем я могу себе помочь сейчас?» — 1 доброжелательное действие в ближайшее время.",
            ],
        },
    },

    # ===== Решения и неопределённость =====
    "decisions": {
        "tiny_experiment": {
            "title": "Маленький эксперимент",
            "intro": (
                "Когда решения пугают, помогает безопасная проба. Уменьшим масштаб и проверим гипотезу."
            ),
            "steps": [
                "Сформулируй гипотезу: «Если я попробую X, то узнаю Y».",
                "Выбери маленький, обратимый шаг (не окончательное решение).",
                "Определи критерий успеха («я пойму больше», «получу 1 отклик», «станет понятнее на 10%»).",
                "Сделай шаг. Запиши, что узнал(а) — даже малое знание важно.",
            ],
        },
        "cost_benefit": {
            "title": "Плюсы/минусы (по-реальному)",
            "intro": (
                "Классика, но честно: учитываем не только рациональные пункты, но и ресурс/чувства."
            ),
            "steps": [
                "Вариант А: 3 плюса, 3 минуса. Поставь «вес» от 1 до 3 каждому пункту.",
                "Вариант B: то же самое.",
                "Сверь «взвешенные итоги». Отметь, какой вариант лучше твоего состояния на сейчас.",
            ],
        },
    },

    # ===== Социальная тревога =====
    "social_anxiety": {
        "breath_before_talk": {
            "title": "3 цикла перед разговором",
            "intro": (
                "Перед общением — три коротких дыхательных цикла, чтобы снизить напряжение и вернуть ясность."
            ),
            "steps": [
                "Вдох на 4 — выдох на 6. Почувствуй опору ног.",
                "Вдох на 4 — выдох на 6. Ослабь плечи.",
                "Вдох на 4 — выдох на 6. Скажи себе: «Я справлюсь по-человечески, не идеально».",
            ],
        },
        "anchoring_phrase": {
            "title": "Фраза-якорь",
            "intro": (
                "Договоримся с собой о поддерживающей фразе. Она помогает оставаться на своей стороне."
            ),
            "steps": [
                "Выбери фразу. Примеры: «Я имею право волноваться». «Я не обязан нравиться всем».",
                "Произнеси её вслух или про себя 3 раза. Отметь, как меняется состояние.",
                "Договорись: в следующей сложной ситуации повторю её перед началом и после.",
            ],
        },
    },

    # ===== Рефлексия (отдельный режим чата) =====
    # bot.py обрабатывает eid == "reflection" как «свободный диалог», без шагов.
    "reflection": {
        "reflection": {
            "title": "Свободная рефлексия",
            "intro": (
                "Здесь можно просто говорить: что внутри, что волнует, что хочется прояснить. "
                "Я рядом и помогу разложить мысли и чувства по полочкам в твоём темпе."
            ),
            "steps": [
                "Напиши, что сейчас важнее всего проговорить. Можно начать с «Меня беспокоит…» или «Я заметил(а), что…». "
                "Дальше — свободный диалог в чате."
            ],
        }
    },
}
