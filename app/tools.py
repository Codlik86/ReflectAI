import asyncio
from aiogram.types import Message

REFRAMING_STEPS = [
    ("thought", "–®–∞–≥ 1 –∏–∑ 4 ‚Äî *–ú—ã—Å–ª—å*.\n\n–ß—Ç–æ —Ç—ã —Å–µ–π—á–∞—Å –¥—É–º–∞–µ—à—å –æ —Å–∏—Ç—É–∞—Ü–∏–∏?\n–ù–∞–ø–∏—à–∏ 1‚Äì2 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è."),
    ("emotion", "–®–∞–≥ 2 –∏–∑ 4 ‚Äî *–≠–º–æ—Ü–∏—è*.\n\n–ß—Ç–æ —Ç—ã —á—É–≤—Å—Ç–≤—É–µ—à—å? (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç—Ä–µ–≤–æ–≥–∞, –∑–ª–æ—Å—Ç—å, –≥—Ä—É—Å—Ç—å)\n–ù–∞—Å–∫–æ–ª—å–∫–æ —Å–∏–ª—å–Ω–æ –ø–æ —à–∫–∞–ª–µ 1‚Äì10?"),
    ("behavior", "–®–∞–≥ 3 –∏–∑ 4 ‚Äî *–î–µ–π—Å—Ç–≤–∏–µ*.\n\n–ß—Ç–æ —Ç—ã –æ–±—ã—á–Ω–æ –¥–µ–ª–∞–µ—à—å (–∏–ª–∏ —Ö–æ—á–µ—Ç—Å—è —Å–¥–µ–ª–∞—Ç—å), –∫–æ–≥–¥–∞ —Ç–∞–∫ –¥—É–º–∞–µ—à—å/—á—É–≤—Å—Ç–≤—É–µ—à—å?"),
    ("alternative", "–®–∞–≥ 4 –∏–∑ 4 ‚Äî *–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞*.\n\n–ö–∞–∫–∞—è –±–æ–ª–µ–µ —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –º—ã—Å–ª—å –º–æ–≥–ª–∞ –±—ã –ø–æ–º–æ—á—å –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ —Å–∏—Ç—É–∞—Ü–∏—é –∏–Ω–∞—á–µ?\n–ò–¥–µ—è –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞: ¬´—è –Ω–µ –æ–±—è–∑–∞–Ω –±—ã—Ç—å –∏–¥–µ–∞–ª—å–Ω—ã–º, –º–æ–≥—É —Å–¥–µ–ª–∞—Ç—å –ø–æ —à–∞–≥—É¬ª"),
]

BREATHING_SCRIPT = [
    "–ù–∞—á–Ω—ë–º –¥—ã—Ö–∞—Ç–µ–ª—å–Ω—É—é –ø–∞—É–∑—É (60 —Å–µ–∫). –°—è–¥—å —É–¥–æ–±–Ω–æ, –æ–ø—É—Å—Ç–∏ –ø–ª–µ—á–∏.",
    "–í–¥–æ—Ö —á–µ—Ä–µ–∑ –Ω–æ—Å ‚Äî 4‚Ä¶",
    "–ó–∞–¥–µ—Ä–∂–∫–∞ ‚Äî 2‚Ä¶",
    "–í—ã–¥–æ—Ö —á–µ—Ä–µ–∑ —Ä–æ—Ç ‚Äî 6‚Ä¶",
]

BODY_SCAN_TEXT = (
    "üßò Body Scan (3‚Äì5 –º–∏–Ω)\n\n"
    "1) –°—è–¥—å/–ª—è–≥ —É–¥–æ–±–Ω–æ, –∑–∞–∫—Ä–æ–π –≥–ª–∞–∑–∞.\n"
    "2) –ü–µ—Ä–µ–≤–µ–¥–∏ –≤–Ω–∏–º–∞–Ω–∏–µ –≤ —Å—Ç—É–ø–Ω–∏, –≥–æ–ª–µ–Ω–∏, –∫–æ–ª–µ–Ω–∏‚Ä¶ –º–µ–¥–ª–µ–Ω–Ω–æ –ø–æ–¥–Ω–∏–º–∞–π—Å—è –≤—ã—à–µ.\n"
    "3) –í –∫–∞–∂–¥–æ–π –∑–æ–Ω–µ –æ—Ç–º–µ—Ç—å: —Ç–µ–ø–ª–æ/—Ö–æ–ª–æ–¥, –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ/—Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏–µ, –ø–æ–∫–∞–ª—ã–≤–∞–Ω–∏–µ.\n"
    "4) –ï—Å–ª–∏ —É–º —É—Ö–æ–¥–∏—Ç ‚Äî –º—è–≥–∫–æ –≤–æ–∑–≤—Ä–∞—â–∞–π –≤–Ω–∏–º–∞–Ω–∏–µ –∫ —Ç–µ–ª—É –∏ –¥—ã—Ö–∞–Ω–∏—é.\n"
    "5) –ó–∞–≤–µ—Ä—à–∏ –≥–ª—É–±–æ–∫–∏–º –≤–¥–æ—Ö–æ–º/–≤—ã–¥–æ—Ö–æ–º –∏ –º—è–≥–∫–æ –æ—Ç–∫—Ä–æ–π –≥–ª–∞–∑–∞.\n\n"
    "–•–æ—á–µ—à—å ‚Äî —Å–æ—Ö—Ä–∞–Ω–∏ –≥–ª–∞–≤–Ω—ã–π –∏–Ω—Å–∞–π—Ç –ø–æ—Å–ª–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –∫–Ω–æ–ø–∫–æ–π ¬´üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–Ω—Å–∞–π—Ç¬ª."
)

async def breathing_60s(message: Message):
    # –æ—Ç–ø—Ä–∞–≤–∏–º –æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –±—É–¥–µ–º –µ–≥–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å (—á—Ç–æ–±—ã –Ω–µ —Å–ø–∞–º–∏—Ç—å)
    msg = await message.answer("ü´Å –î—ã—Ö–∞—Ç–µ–ª—å–Ω–∞—è –ø–∞—É–∑–∞ ‚Äî –Ω–∞—á–∏–Ω–∞–µ–º‚Ä¶")
    # 4 —Ü–∏–∫–ª–∞ –ø–æ ~15 —Å–µ–∫ (4+2+6 = 12, –¥–∞–¥–∏–º –Ω–µ–±–æ–ª—å—à–∏–µ –ø–∞—É–∑—ã)
    for i in range(1, 5):
        try:
            await msg.edit_text(f"ü´Å –¶–∏–∫–ª {i}/4\n\n" + "\n".join(BREATHING_SCRIPT))
        except Exception:
            pass
        # –í–¥–æ—Ö (4—Å)
        await asyncio.sleep(4)
        # –ó–∞–¥–µ—Ä–∂–∫–∞ (2—Å)
        try:
            await msg.edit_text(f"ü´Å –¶–∏–∫–ª {i}/4\n\n–ó–∞–¥–µ—Ä–∂–∫–∞ ‚Äî 2‚Ä¶")
        except Exception:
            pass
        await asyncio.sleep(2)
        # –í—ã–¥–æ—Ö (6—Å)
        try:
            await msg.edit_text(f"ü´Å –¶–∏–∫–ª {i}/4\n\n–í—ã–¥–æ—Ö ‚Äî 6‚Ä¶")
        except Exception:
            pass
        await asyncio.sleep(6)

    try:
        await msg.edit_text("–ì–æ—Ç–æ–≤–æ. –ö–∞–∫ –æ—â—É—â–µ–Ω–∏—è? üôå\n–ú–æ–∂–µ—à—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –º—ã—Å–ª—å/–æ—â—É—â–µ–Ω–∏–µ –∫–∞–∫ –∏–Ω—Å–∞–π—Ç (–∫–Ω–æ–ø–∫–∞ –Ω–∏–∂–µ).")
    except Exception:
        await message.answer("–ì–æ—Ç–æ–≤–æ. –ö–∞–∫ –æ—â—É—â–µ–Ω–∏—è? üôå")
